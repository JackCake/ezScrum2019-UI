*** Settings ***
Library           keywords/lib/Selenium2Improved.py
Resource          keywords/Product_List/Product_List_Setup.txt
Resource          keywords/Product_List/Product_List_Keywords.txt

*** Test Cases ***
Add Product Test
    [Setup]    Add Product Setup
    ${product_name}    Set Variable    ezKanban
    Add Product    ${product_name}
    Wait Until Keyword Succeeds    30s    3s    Page Should Contain Element    //td[text()="${product_name}"]
    [Teardown]    Exit ezScrum2019

Edit Product Test
    [Setup]    Edit Product Setup
    ${original_product_name}    Set Variable    ezKanban
    ${new_product_name}    Set Variable    ezScrum2019
    Edit Product    ${original_product_name}    ${new_product_name}
    Wait Until Keyword Succeeds    30s    3s    Page Should Contain Element    //td[text()="${new_product_name}"]
    [Teardown]    Exit ezScrum2019

Delete Product Test
    [Setup]    Delete Product Setup
    ${product_name}    Set Variable    ezKanban
    Delete Product    ${product_name}
    Wait Until Keyword Succeeds    30s    3s    Page Should Not Contain Element    //td[text()="${product_name}"]
    [Teardown]    Exit ezScrum2019

*** Keywords ***
Move Task Doing Status
    [Arguments]    ${description}
    Drag And Drop    //table[@class="TaskCard_Table"]//td[text()="${description}"]/../../../..    //table[@class="TaskCard_Table"]//td[text()="${description}"]/../../../../../../../../div[2]

Move Task Done Status
    [Arguments]    ${description}
    Drag And Drop    //table[@class="TaskCard_Table"]//td[text()="${description}"]/../../../..    //table[@class="TaskCard_Table"]//td[text()="${description}"]/../../../../../../../../div[3]

Move Backlog Item Done Status
    [Arguments]    ${description}
    Drag And Drop    //table[@class="StoryCard_Table"]//td[text()="${description}"]/../../../..    //table[@class="StoryCard_Table"]//td[text()="${description}"]/../../../../../../../div[3]

Drag And Drop
    [Arguments]    ${source}    ${target}
    ${js}    Get File    drag-n-drop.js
    ${result}    Execute Javascript    ${js}; return DragNDrop("${source}", "${target}");
    Log    ${result}
    Capture Page Screenshot
    Sleep    1
